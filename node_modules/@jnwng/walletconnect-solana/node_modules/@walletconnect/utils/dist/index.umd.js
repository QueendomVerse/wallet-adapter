(function(E,Ce){typeof exports=="object"&&typeof module<"u"?Ce(exports):typeof define=="function"&&define.amd?define(["exports"],Ce):(E=typeof globalThis<"u"?globalThis:E||self,Ce(E["@walletconnect/utils"]={}))})(this,function(E){"use strict";const Ce=":";function zt(e){const[t,r]=e.split(Ce);return{namespace:t,reference:r}}function Yt(e){const{namespace:t,reference:r}=e;return[t,r].join(Ce)}function st(e){const[t,r,i]=e.split(Ce);return{namespace:t,reference:r,address:i}}function qt(e){const{namespace:t,reference:r,address:i}=e;return[t,r,i].join(Ce)}function ut(e,t){const r=[];return e.forEach(i=>{const a=t(i);r.includes(a)||r.push(a)}),r}function Gt(e){const{address:t}=st(e);return t}function Xt(e){const{namespace:t,reference:r}=st(e);return Yt({namespace:t,reference:r})}function pn(e,t){const{namespace:r,reference:i}=zt(t);return qt({namespace:r,reference:i,address:e})}function Sn(e){return ut(e,Gt)}function Jt(e){return ut(e,Xt)}function On(e,t=[]){const r=[];return Object.keys(e).forEach(i=>{if(t.length&&!t.includes(i))return;const a=e[i];r.push(...a.accounts)}),r}function Nn(e,t=[]){const r=[];return Object.keys(e).forEach(i=>{if(t.length&&!t.includes(i))return;const a=e[i];r.push(...Jt(a.accounts))}),r}function An(e,t=[]){const r=[];return Object.keys(e).forEach(i=>{if(t.length&&!t.includes(i))return;const a=e[i];r.push(...a.chains)}),r}var ee=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Cn(e){var t=e.default;if(typeof t=="function"){var r=function(){return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var a=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(r,i,a.get?a:{enumerable:!0,get:function(){return e[i]}})}),r}var ct={},qe={},P={},Qt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(s,c){var w=s>>>16&65535,b=s&65535,S=c>>>16&65535,y=c&65535;return b*y+(w*y+b*S<<16>>>0)|0}e.mul=Math.imul||t;function r(s,c){return s+c|0}e.add=r;function i(s,c){return s-c|0}e.sub=i;function a(s,c){return s<<c|s>>>32-c}e.rotl=a;function f(s,c){return s<<32-c|s>>>c}e.rotr=f;function d(s){return typeof s=="number"&&isFinite(s)&&Math.floor(s)===s}e.isInteger=Number.isInteger||d,e.MAX_SAFE_INTEGER=9007199254740991,e.isSafeInteger=function(s){return e.isInteger(s)&&s>=-e.MAX_SAFE_INTEGER&&s<=e.MAX_SAFE_INTEGER}})(Qt),Object.defineProperty(P,"__esModule",{value:!0});var kt=Qt;function Un(e,t){return t===void 0&&(t=0),(e[t+0]<<8|e[t+1])<<16>>16}P.readInt16BE=Un;function Tn(e,t){return t===void 0&&(t=0),(e[t+0]<<8|e[t+1])>>>0}P.readUint16BE=Tn;function In(e,t){return t===void 0&&(t=0),(e[t+1]<<8|e[t])<<16>>16}P.readInt16LE=In;function Mn(e,t){return t===void 0&&(t=0),(e[t+1]<<8|e[t])>>>0}P.readUint16LE=Mn;function Zt(e,t,r){return t===void 0&&(t=new Uint8Array(2)),r===void 0&&(r=0),t[r+0]=e>>>8,t[r+1]=e>>>0,t}P.writeUint16BE=Zt,P.writeInt16BE=Zt;function er(e,t,r){return t===void 0&&(t=new Uint8Array(2)),r===void 0&&(r=0),t[r+0]=e>>>0,t[r+1]=e>>>8,t}P.writeUint16LE=er,P.writeInt16LE=er;function ft(e,t){return t===void 0&&(t=0),e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}P.readInt32BE=ft;function ht(e,t){return t===void 0&&(t=0),(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}P.readUint32BE=ht;function lt(e,t){return t===void 0&&(t=0),e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]}P.readInt32LE=lt;function dt(e,t){return t===void 0&&(t=0),(e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t])>>>0}P.readUint32LE=dt;function Ge(e,t,r){return t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0),t[r+0]=e>>>24,t[r+1]=e>>>16,t[r+2]=e>>>8,t[r+3]=e>>>0,t}P.writeUint32BE=Ge,P.writeInt32BE=Ge;function Xe(e,t,r){return t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0),t[r+0]=e>>>0,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24,t}P.writeUint32LE=Xe,P.writeInt32LE=Xe;function Fn(e,t){t===void 0&&(t=0);var r=ft(e,t),i=ft(e,t+4);return r*4294967296+i-(i>>31)*4294967296}P.readInt64BE=Fn;function Rn(e,t){t===void 0&&(t=0);var r=ht(e,t),i=ht(e,t+4);return r*4294967296+i}P.readUint64BE=Rn;function Pn(e,t){t===void 0&&(t=0);var r=lt(e,t),i=lt(e,t+4);return i*4294967296+r-(r>>31)*4294967296}P.readInt64LE=Pn;function Ln(e,t){t===void 0&&(t=0);var r=dt(e,t),i=dt(e,t+4);return i*4294967296+r}P.readUint64LE=Ln;function tr(e,t,r){return t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0),Ge(e/4294967296>>>0,t,r),Ge(e>>>0,t,r+4),t}P.writeUint64BE=tr,P.writeInt64BE=tr;function rr(e,t,r){return t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0),Xe(e>>>0,t,r),Xe(e/4294967296>>>0,t,r+4),t}P.writeUint64LE=rr,P.writeInt64LE=rr;function Bn(e,t,r){if(r===void 0&&(r=0),e%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(e/8>t.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var i=0,a=1,f=e/8+r-1;f>=r;f--)i+=t[f]*a,a*=256;return i}P.readUintBE=Bn;function jn(e,t,r){if(r===void 0&&(r=0),e%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(e/8>t.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var i=0,a=1,f=r;f<r+e/8;f++)i+=t[f]*a,a*=256;return i}P.readUintLE=jn;function $n(e,t,r,i){if(r===void 0&&(r=new Uint8Array(e/8)),i===void 0&&(i=0),e%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!kt.isSafeInteger(t))throw new Error("writeUintBE value must be an integer");for(var a=1,f=e/8+i-1;f>=i;f--)r[f]=t/a&255,a*=256;return r}P.writeUintBE=$n;function Vn(e,t,r,i){if(r===void 0&&(r=new Uint8Array(e/8)),i===void 0&&(i=0),e%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!kt.isSafeInteger(t))throw new Error("writeUintLE value must be an integer");for(var a=1,f=i;f<i+e/8;f++)r[f]=t/a&255,a*=256;return r}P.writeUintLE=Vn;function Hn(e,t){t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat32(t)}P.readFloat32BE=Hn;function Kn(e,t){t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat32(t,!0)}P.readFloat32LE=Kn;function xn(e,t){t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat64(t)}P.readFloat64BE=xn;function Wn(e,t){t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat64(t,!0)}P.readFloat64LE=Wn;function zn(e,t,r){t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0);var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return i.setFloat32(r,e),t}P.writeFloat32BE=zn;function Yn(e,t,r){t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0);var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return i.setFloat32(r,e,!0),t}P.writeFloat32LE=Yn;function qn(e,t,r){t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0);var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return i.setFloat64(r,e),t}P.writeFloat64BE=qn;function Gn(e,t,r){t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0);var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return i.setFloat64(r,e,!0),t}P.writeFloat64LE=Gn;var ye={};Object.defineProperty(ye,"__esModule",{value:!0});function Xn(e){for(var t=0;t<e.length;t++)e[t]=0;return e}ye.wipe=Xn,Object.defineProperty(qe,"__esModule",{value:!0});var te=P,Dt=ye,Jn=20;function Qn(e,t,r){for(var i=1634760805,a=857760878,f=2036477234,d=1797285236,s=r[3]<<24|r[2]<<16|r[1]<<8|r[0],c=r[7]<<24|r[6]<<16|r[5]<<8|r[4],w=r[11]<<24|r[10]<<16|r[9]<<8|r[8],b=r[15]<<24|r[14]<<16|r[13]<<8|r[12],S=r[19]<<24|r[18]<<16|r[17]<<8|r[16],y=r[23]<<24|r[22]<<16|r[21]<<8|r[20],_=r[27]<<24|r[26]<<16|r[25]<<8|r[24],m=r[31]<<24|r[30]<<16|r[29]<<8|r[28],O=t[3]<<24|t[2]<<16|t[1]<<8|t[0],u=t[7]<<24|t[6]<<16|t[5]<<8|t[4],D=t[11]<<24|t[10]<<16|t[9]<<8|t[8],p=t[15]<<24|t[14]<<16|t[13]<<8|t[12],g=i,l=a,v=f,h=d,n=s,o=c,N=w,U=b,T=S,L=y,B=_,A=m,F=O,R=u,I=D,M=p,G=0;G<Jn;G+=2)g=g+n|0,F^=g,F=F>>>32-16|F<<16,T=T+F|0,n^=T,n=n>>>32-12|n<<12,l=l+o|0,R^=l,R=R>>>32-16|R<<16,L=L+R|0,o^=L,o=o>>>32-12|o<<12,v=v+N|0,I^=v,I=I>>>32-16|I<<16,B=B+I|0,N^=B,N=N>>>32-12|N<<12,h=h+U|0,M^=h,M=M>>>32-16|M<<16,A=A+M|0,U^=A,U=U>>>32-12|U<<12,v=v+N|0,I^=v,I=I>>>32-8|I<<8,B=B+I|0,N^=B,N=N>>>32-7|N<<7,h=h+U|0,M^=h,M=M>>>32-8|M<<8,A=A+M|0,U^=A,U=U>>>32-7|U<<7,l=l+o|0,R^=l,R=R>>>32-8|R<<8,L=L+R|0,o^=L,o=o>>>32-7|o<<7,g=g+n|0,F^=g,F=F>>>32-8|F<<8,T=T+F|0,n^=T,n=n>>>32-7|n<<7,g=g+o|0,M^=g,M=M>>>32-16|M<<16,B=B+M|0,o^=B,o=o>>>32-12|o<<12,l=l+N|0,F^=l,F=F>>>32-16|F<<16,A=A+F|0,N^=A,N=N>>>32-12|N<<12,v=v+U|0,R^=v,R=R>>>32-16|R<<16,T=T+R|0,U^=T,U=U>>>32-12|U<<12,h=h+n|0,I^=h,I=I>>>32-16|I<<16,L=L+I|0,n^=L,n=n>>>32-12|n<<12,v=v+U|0,R^=v,R=R>>>32-8|R<<8,T=T+R|0,U^=T,U=U>>>32-7|U<<7,h=h+n|0,I^=h,I=I>>>32-8|I<<8,L=L+I|0,n^=L,n=n>>>32-7|n<<7,l=l+N|0,F^=l,F=F>>>32-8|F<<8,A=A+F|0,N^=A,N=N>>>32-7|N<<7,g=g+o|0,M^=g,M=M>>>32-8|M<<8,B=B+M|0,o^=B,o=o>>>32-7|o<<7;te.writeUint32LE(g+i|0,e,0),te.writeUint32LE(l+a|0,e,4),te.writeUint32LE(v+f|0,e,8),te.writeUint32LE(h+d|0,e,12),te.writeUint32LE(n+s|0,e,16),te.writeUint32LE(o+c|0,e,20),te.writeUint32LE(N+w|0,e,24),te.writeUint32LE(U+b|0,e,28),te.writeUint32LE(T+S|0,e,32),te.writeUint32LE(L+y|0,e,36),te.writeUint32LE(B+_|0,e,40),te.writeUint32LE(A+m|0,e,44),te.writeUint32LE(F+O|0,e,48),te.writeUint32LE(R+u|0,e,52),te.writeUint32LE(I+D|0,e,56),te.writeUint32LE(M+p|0,e,60)}function nr(e,t,r,i,a){if(a===void 0&&(a=0),e.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(i.length<r.length)throw new Error("ChaCha: destination is shorter than source");var f,d;if(a===0){if(t.length!==8&&t.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");f=new Uint8Array(16),d=f.length-t.length,f.set(t,d)}else{if(t.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");f=t,d=a}for(var s=new Uint8Array(64),c=0;c<r.length;c+=64){Qn(s,f,e);for(var w=c;w<c+64&&w<r.length;w++)i[w]=r[w]^s[w-c];Zn(f,0,d)}return Dt.wipe(s),a===0&&Dt.wipe(f),i}qe.streamXOR=nr;function kn(e,t,r,i){return i===void 0&&(i=0),Dt.wipe(r),nr(e,t,r,r,i)}qe.stream=kn;function Zn(e,t,r){for(var i=1;r--;)i=i+(e[t]&255)|0,e[t]=i&255,i>>>=8,t++;if(i>0)throw new Error("ChaCha: counter overflow")}var ir={},Ue={};Object.defineProperty(Ue,"__esModule",{value:!0});function ei(e,t,r){return~(e-1)&t|e-1&r}Ue.select=ei;function ti(e,t){return(e|0)-(t|0)-1>>>31&1}Ue.lessOrEqual=ti;function ar(e,t){if(e.length!==t.length)return 0;for(var r=0,i=0;i<e.length;i++)r|=e[i]^t[i];return 1&r-1>>>8}Ue.compare=ar;function ri(e,t){return e.length===0||t.length===0?!1:ar(e,t)!==0}Ue.equal=ri,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Ue,r=ye;e.DIGEST_LENGTH=16;var i=function(){function d(s){this.digestLength=e.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var c=s[0]|s[1]<<8;this._r[0]=c&8191;var w=s[2]|s[3]<<8;this._r[1]=(c>>>13|w<<3)&8191;var b=s[4]|s[5]<<8;this._r[2]=(w>>>10|b<<6)&7939;var S=s[6]|s[7]<<8;this._r[3]=(b>>>7|S<<9)&8191;var y=s[8]|s[9]<<8;this._r[4]=(S>>>4|y<<12)&255,this._r[5]=y>>>1&8190;var _=s[10]|s[11]<<8;this._r[6]=(y>>>14|_<<2)&8191;var m=s[12]|s[13]<<8;this._r[7]=(_>>>11|m<<5)&8065;var O=s[14]|s[15]<<8;this._r[8]=(m>>>8|O<<8)&8191,this._r[9]=O>>>5&127,this._pad[0]=s[16]|s[17]<<8,this._pad[1]=s[18]|s[19]<<8,this._pad[2]=s[20]|s[21]<<8,this._pad[3]=s[22]|s[23]<<8,this._pad[4]=s[24]|s[25]<<8,this._pad[5]=s[26]|s[27]<<8,this._pad[6]=s[28]|s[29]<<8,this._pad[7]=s[30]|s[31]<<8}return d.prototype._blocks=function(s,c,w){for(var b=this._fin?0:2048,S=this._h[0],y=this._h[1],_=this._h[2],m=this._h[3],O=this._h[4],u=this._h[5],D=this._h[6],p=this._h[7],g=this._h[8],l=this._h[9],v=this._r[0],h=this._r[1],n=this._r[2],o=this._r[3],N=this._r[4],U=this._r[5],T=this._r[6],L=this._r[7],B=this._r[8],A=this._r[9];w>=16;){var F=s[c+0]|s[c+1]<<8;S+=F&8191;var R=s[c+2]|s[c+3]<<8;y+=(F>>>13|R<<3)&8191;var I=s[c+4]|s[c+5]<<8;_+=(R>>>10|I<<6)&8191;var M=s[c+6]|s[c+7]<<8;m+=(I>>>7|M<<9)&8191;var G=s[c+8]|s[c+9]<<8;O+=(M>>>4|G<<12)&8191,u+=G>>>1&8191;var k=s[c+10]|s[c+11]<<8;D+=(G>>>14|k<<2)&8191;var Q=s[c+12]|s[c+13]<<8;p+=(k>>>11|Q<<5)&8191;var J=s[c+14]|s[c+15]<<8;g+=(Q>>>8|J<<8)&8191,l+=J>>>5|b;var C=0,j=C;j+=S*v,j+=y*(5*A),j+=_*(5*B),j+=m*(5*L),j+=O*(5*T),C=j>>>13,j&=8191,j+=u*(5*U),j+=D*(5*N),j+=p*(5*o),j+=g*(5*n),j+=l*(5*h),C+=j>>>13,j&=8191;var $=C;$+=S*h,$+=y*v,$+=_*(5*A),$+=m*(5*B),$+=O*(5*L),C=$>>>13,$&=8191,$+=u*(5*T),$+=D*(5*U),$+=p*(5*N),$+=g*(5*o),$+=l*(5*n),C+=$>>>13,$&=8191;var V=C;V+=S*n,V+=y*h,V+=_*v,V+=m*(5*A),V+=O*(5*B),C=V>>>13,V&=8191,V+=u*(5*L),V+=D*(5*T),V+=p*(5*U),V+=g*(5*N),V+=l*(5*o),C+=V>>>13,V&=8191;var H=C;H+=S*o,H+=y*n,H+=_*h,H+=m*v,H+=O*(5*A),C=H>>>13,H&=8191,H+=u*(5*B),H+=D*(5*L),H+=p*(5*T),H+=g*(5*U),H+=l*(5*N),C+=H>>>13,H&=8191;var K=C;K+=S*N,K+=y*o,K+=_*n,K+=m*h,K+=O*v,C=K>>>13,K&=8191,K+=u*(5*A),K+=D*(5*B),K+=p*(5*L),K+=g*(5*T),K+=l*(5*U),C+=K>>>13,K&=8191;var x=C;x+=S*U,x+=y*N,x+=_*o,x+=m*n,x+=O*h,C=x>>>13,x&=8191,x+=u*v,x+=D*(5*A),x+=p*(5*B),x+=g*(5*L),x+=l*(5*T),C+=x>>>13,x&=8191;var W=C;W+=S*T,W+=y*U,W+=_*N,W+=m*o,W+=O*n,C=W>>>13,W&=8191,W+=u*h,W+=D*v,W+=p*(5*A),W+=g*(5*B),W+=l*(5*L),C+=W>>>13,W&=8191;var Y=C;Y+=S*L,Y+=y*T,Y+=_*U,Y+=m*N,Y+=O*o,C=Y>>>13,Y&=8191,Y+=u*n,Y+=D*h,Y+=p*v,Y+=g*(5*A),Y+=l*(5*B),C+=Y>>>13,Y&=8191;var q=C;q+=S*B,q+=y*L,q+=_*T,q+=m*U,q+=O*N,C=q>>>13,q&=8191,q+=u*o,q+=D*n,q+=p*h,q+=g*v,q+=l*(5*A),C+=q>>>13,q&=8191;var X=C;X+=S*A,X+=y*B,X+=_*L,X+=m*T,X+=O*U,C=X>>>13,X&=8191,X+=u*N,X+=D*o,X+=p*n,X+=g*h,X+=l*v,C+=X>>>13,X&=8191,C=(C<<2)+C|0,C=C+j|0,j=C&8191,C=C>>>13,$+=C,S=j,y=$,_=V,m=H,O=K,u=x,D=W,p=Y,g=q,l=X,c+=16,w-=16}this._h[0]=S,this._h[1]=y,this._h[2]=_,this._h[3]=m,this._h[4]=O,this._h[5]=u,this._h[6]=D,this._h[7]=p,this._h[8]=g,this._h[9]=l},d.prototype.finish=function(s,c){c===void 0&&(c=0);var w=new Uint16Array(10),b,S,y,_;if(this._leftover){for(_=this._leftover,this._buffer[_++]=1;_<16;_++)this._buffer[_]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(b=this._h[1]>>>13,this._h[1]&=8191,_=2;_<10;_++)this._h[_]+=b,b=this._h[_]>>>13,this._h[_]&=8191;for(this._h[0]+=b*5,b=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=b,b=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=b,w[0]=this._h[0]+5,b=w[0]>>>13,w[0]&=8191,_=1;_<10;_++)w[_]=this._h[_]+b,b=w[_]>>>13,w[_]&=8191;for(w[9]-=1<<13,S=(b^1)-1,_=0;_<10;_++)w[_]&=S;for(S=~S,_=0;_<10;_++)this._h[_]=this._h[_]&S|w[_];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,y=this._h[0]+this._pad[0],this._h[0]=y&65535,_=1;_<8;_++)y=(this._h[_]+this._pad[_]|0)+(y>>>16)|0,this._h[_]=y&65535;return s[c+0]=this._h[0]>>>0,s[c+1]=this._h[0]>>>8,s[c+2]=this._h[1]>>>0,s[c+3]=this._h[1]>>>8,s[c+4]=this._h[2]>>>0,s[c+5]=this._h[2]>>>8,s[c+6]=this._h[3]>>>0,s[c+7]=this._h[3]>>>8,s[c+8]=this._h[4]>>>0,s[c+9]=this._h[4]>>>8,s[c+10]=this._h[5]>>>0,s[c+11]=this._h[5]>>>8,s[c+12]=this._h[6]>>>0,s[c+13]=this._h[6]>>>8,s[c+14]=this._h[7]>>>0,s[c+15]=this._h[7]>>>8,this._finished=!0,this},d.prototype.update=function(s){var c=0,w=s.length,b;if(this._leftover){b=16-this._leftover,b>w&&(b=w);for(var S=0;S<b;S++)this._buffer[this._leftover+S]=s[c+S];if(w-=b,c+=b,this._leftover+=b,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(w>=16&&(b=w-w%16,this._blocks(s,c,b),c+=b,w-=b),w){for(var S=0;S<w;S++)this._buffer[this._leftover+S]=s[c+S];this._leftover+=w}return this},d.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var s=new Uint8Array(16);return this.finish(s),s},d.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},d}();e.Poly1305=i;function a(d,s){var c=new i(d);c.update(s);var w=c.digest();return c.clean(),w}e.oneTimeAuth=a;function f(d,s){return d.length!==e.DIGEST_LENGTH||s.length!==e.DIGEST_LENGTH?!1:t.equal(d,s)}e.equal=f}(ir),function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=qe,r=ir,i=ye,a=P,f=Ue;e.KEY_LENGTH=32,e.NONCE_LENGTH=12,e.TAG_LENGTH=16;var d=new Uint8Array(16),s=function(){function c(w){if(this.nonceLength=e.NONCE_LENGTH,this.tagLength=e.TAG_LENGTH,w.length!==e.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(w)}return c.prototype.seal=function(w,b,S,y){if(w.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var _=new Uint8Array(16);_.set(w,_.length-w.length);var m=new Uint8Array(32);t.stream(this._key,_,m,4);var O=b.length+this.tagLength,u;if(y){if(y.length!==O)throw new Error("ChaCha20Poly1305: incorrect destination length");u=y}else u=new Uint8Array(O);return t.streamXOR(this._key,_,b,u,4),this._authenticate(u.subarray(u.length-this.tagLength,u.length),m,u.subarray(0,u.length-this.tagLength),S),i.wipe(_),u},c.prototype.open=function(w,b,S,y){if(w.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(b.length<this.tagLength)return null;var _=new Uint8Array(16);_.set(w,_.length-w.length);var m=new Uint8Array(32);t.stream(this._key,_,m,4);var O=new Uint8Array(this.tagLength);if(this._authenticate(O,m,b.subarray(0,b.length-this.tagLength),S),!f.equal(O,b.subarray(b.length-this.tagLength,b.length)))return null;var u=b.length-this.tagLength,D;if(y){if(y.length!==u)throw new Error("ChaCha20Poly1305: incorrect destination length");D=y}else D=new Uint8Array(u);return t.streamXOR(this._key,_,b.subarray(0,b.length-this.tagLength),D,4),i.wipe(_),D},c.prototype.clean=function(){return i.wipe(this._key),this},c.prototype._authenticate=function(w,b,S,y){var _=new r.Poly1305(b);y&&(_.update(y),y.length%16>0&&_.update(d.subarray(y.length%16))),_.update(S),S.length%16>0&&_.update(d.subarray(S.length%16));var m=new Uint8Array(8);y&&a.writeUint64LE(y.length,m),_.update(m),a.writeUint64LE(S.length,m),_.update(m);for(var O=_.digest(),u=0;u<O.length;u++)w[u]=O[u];_.clean(),i.wipe(O),i.wipe(m)},c}();e.ChaCha20Poly1305=s}(ct);var or={},He={},Et={};Object.defineProperty(Et,"__esModule",{value:!0});function ni(e){return typeof e.saveState<"u"&&typeof e.restoreState<"u"&&typeof e.cleanSavedState<"u"}Et.isSerializableHash=ni,Object.defineProperty(He,"__esModule",{value:!0});var Ne=Et,ii=Ue,ai=ye,sr=function(){function e(t,r){this._finished=!1,this._inner=new t,this._outer=new t,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var i=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(i).clean():i.set(r);for(var a=0;a<i.length;a++)i[a]^=54;this._inner.update(i);for(var a=0;a<i.length;a++)i[a]^=106;this._outer.update(i),Ne.isSerializableHash(this._inner)&&Ne.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),ai.wipe(i)}return e.prototype.reset=function(){if(!Ne.isSerializableHash(this._inner)||!Ne.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},e.prototype.clean=function(){Ne.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),Ne.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},e.prototype.update=function(t){return this._inner.update(t),this},e.prototype.finish=function(t){return this._finished?(this._outer.finish(t),this):(this._inner.finish(t),this._outer.update(t.subarray(0,this.digestLength)).finish(t),this._finished=!0,this)},e.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},e.prototype.saveState=function(){if(!Ne.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},e.prototype.restoreState=function(t){if(!Ne.isSerializableHash(this._inner)||!Ne.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(t),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},e.prototype.cleanSavedState=function(t){if(!Ne.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(t)},e}();He.HMAC=sr;function oi(e,t,r){var i=new sr(e,t);i.update(r);var a=i.digest();return i.clean(),a}He.hmac=oi,He.equal=ii.equal,Object.defineProperty(or,"__esModule",{value:!0});var ur=He,cr=ye,si=function(){function e(t,r,i,a){i===void 0&&(i=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=t,this._info=a;var f=ur.hmac(this._hash,i,r);this._hmac=new ur.HMAC(t,f),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return e.prototype._fillBuffer=function(){this._counter[0]++;var t=this._counter[0];if(t===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),t>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},e.prototype.expand=function(t){for(var r=new Uint8Array(t),i=0;i<r.length;i++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[i]=this._buffer[this._bufpos++];return r},e.prototype.clean=function(){this._hmac.clean(),cr.wipe(this._buffer),cr.wipe(this._counter),this._bufpos=0},e}(),ui=or.HKDF=si,Je={},_t={},vt={};Object.defineProperty(vt,"__esModule",{value:!0});var fr=65536,ci=function(){function e(){this.isAvailable=!1,this.isInstantiated=!1;var t=typeof self<"u"?self.crypto||self.msCrypto:null;t&&t.getRandomValues&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}return e.prototype.randomBytes=function(t){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");for(var r=new Uint8Array(t),i=0;i<r.length;i+=fr)this._crypto.getRandomValues(r.subarray(i,i+Math.min(r.length-i,fr)));return r},e}();vt.BrowserRandomSource=ci;function fi(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var bt={},hi={},li=Object.freeze({__proto__:null,default:hi}),di=Cn(li);Object.defineProperty(bt,"__esModule",{value:!0});var Di=ye,Ei=function(){function e(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof fi<"u"){var t=di;t&&t.randomBytes&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}}return e.prototype.randomBytes=function(t){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");var r=this._crypto.randomBytes(t);if(r.length!==t)throw new Error("NodeRandomSource: got fewer bytes than requested");for(var i=new Uint8Array(t),a=0;a<i.length;a++)i[a]=r[a];return Di.wipe(r),i},e}();bt.NodeRandomSource=Ei,Object.defineProperty(_t,"__esModule",{value:!0});var _i=vt,vi=bt,bi=function(){function e(){if(this.isAvailable=!1,this.name="",this._source=new _i.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new vi.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}return e.prototype.randomBytes=function(t){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(t)},e}();_t.SystemRandomSource=bi,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=_t,r=P,i=ye;e.defaultRandomSource=new t.SystemRandomSource;function a(w,b){return b===void 0&&(b=e.defaultRandomSource),b.randomBytes(w)}e.randomBytes=a;function f(w){w===void 0&&(w=e.defaultRandomSource);var b=a(4,w),S=r.readUint32LE(b);return i.wipe(b),S}e.randomUint32=f;var d="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function s(w,b,S){if(b===void 0&&(b=d),S===void 0&&(S=e.defaultRandomSource),b.length<2)throw new Error("randomString charset is too short");if(b.length>256)throw new Error("randomString charset is too long");for(var y="",_=b.length,m=256-256%_;w>0;){for(var O=a(Math.ceil(w*256/m),S),u=0;u<O.length&&w>0;u++){var D=O[u];D<m&&(y+=b.charAt(D%_),w--)}i.wipe(O)}return y}e.randomString=s;function c(w,b,S){b===void 0&&(b=d),S===void 0&&(S=e.defaultRandomSource);var y=Math.ceil(w/(Math.log(b.length)/Math.LN2));return s(y,b,S)}e.randomStringForEntropy=c}(Je);var Qe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=P,r=ye;e.DIGEST_LENGTH=32,e.BLOCK_SIZE=64;var i=function(){function s(){this.digestLength=e.DIGEST_LENGTH,this.blockSize=e.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return s.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},s.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},s.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},s.prototype.update=function(c,w){if(w===void 0&&(w=c.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var b=0;if(this._bytesHashed+=w,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&w>0;)this._buffer[this._bufferLength++]=c[b++],w--;this._bufferLength===this.blockSize&&(f(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(w>=this.blockSize&&(b=f(this._temp,this._state,c,b,w),w%=this.blockSize);w>0;)this._buffer[this._bufferLength++]=c[b++],w--;return this},s.prototype.finish=function(c){if(!this._finished){var w=this._bytesHashed,b=this._bufferLength,S=w/536870912|0,y=w<<3,_=w%64<56?64:128;this._buffer[b]=128;for(var m=b+1;m<_-8;m++)this._buffer[m]=0;t.writeUint32BE(S,this._buffer,_-8),t.writeUint32BE(y,this._buffer,_-4),f(this._temp,this._state,this._buffer,0,_),this._finished=!0}for(var m=0;m<this.digestLength/4;m++)t.writeUint32BE(this._state[m],c,m*4);return this},s.prototype.digest=function(){var c=new Uint8Array(this.digestLength);return this.finish(c),c},s.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},s.prototype.restoreState=function(c){return this._state.set(c.state),this._bufferLength=c.bufferLength,c.buffer&&this._buffer.set(c.buffer),this._bytesHashed=c.bytesHashed,this._finished=!1,this},s.prototype.cleanSavedState=function(c){r.wipe(c.state),c.buffer&&r.wipe(c.buffer),c.bufferLength=0,c.bytesHashed=0},s}();e.SHA256=i;var a=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function f(s,c,w,b,S){for(;S>=64;){for(var y=c[0],_=c[1],m=c[2],O=c[3],u=c[4],D=c[5],p=c[6],g=c[7],l=0;l<16;l++){var v=b+l*4;s[l]=t.readUint32BE(w,v)}for(var l=16;l<64;l++){var h=s[l-2],n=(h>>>17|h<<32-17)^(h>>>19|h<<32-19)^h>>>10;h=s[l-15];var o=(h>>>7|h<<32-7)^(h>>>18|h<<32-18)^h>>>3;s[l]=(n+s[l-7]|0)+(o+s[l-16]|0)}for(var l=0;l<64;l++){var n=(((u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7))+(u&D^~u&p)|0)+(g+(a[l]+s[l]|0)|0)|0,o=((y>>>2|y<<32-2)^(y>>>13|y<<32-13)^(y>>>22|y<<32-22))+(y&_^y&m^_&m)|0;g=p,p=D,D=u,u=O+n|0,O=m,m=_,_=y,y=n+o|0}c[0]+=y,c[1]+=_,c[2]+=m,c[3]+=O,c[4]+=u,c[5]+=D,c[6]+=p,c[7]+=g,b+=64,S-=64}return b}function d(s){var c=new i;c.update(s);var w=c.digest();return c.clean(),w}e.hash=d})(Qe);var gt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Je,r=ye;e.PUBLIC_KEY_LENGTH=32,e.SECRET_KEY_LENGTH=32,e.SHARED_KEY_LENGTH=32;function i(l){var v=new Float64Array(16);if(l)for(var h=0;h<l.length;h++)v[h]=l[h];return v}var a=new Uint8Array(32);a[0]=9;var f=i([56129,1]);function d(l){for(var v=1,h=0;h<16;h++){var n=l[h]+v+65535;v=Math.floor(n/65536),l[h]=n-v*65536}l[0]+=v-1+37*(v-1)}function s(l,v,h){for(var n=~(h-1),o=0;o<16;o++){var N=n&(l[o]^v[o]);l[o]^=N,v[o]^=N}}function c(l,v){for(var h=i(),n=i(),o=0;o<16;o++)n[o]=v[o];d(n),d(n),d(n);for(var N=0;N<2;N++){h[0]=n[0]-65517;for(var o=1;o<15;o++)h[o]=n[o]-65535-(h[o-1]>>16&1),h[o-1]&=65535;h[15]=n[15]-32767-(h[14]>>16&1);var U=h[15]>>16&1;h[14]&=65535,s(n,h,1-U)}for(var o=0;o<16;o++)l[2*o]=n[o]&255,l[2*o+1]=n[o]>>8}function w(l,v){for(var h=0;h<16;h++)l[h]=v[2*h]+(v[2*h+1]<<8);l[15]&=32767}function b(l,v,h){for(var n=0;n<16;n++)l[n]=v[n]+h[n]}function S(l,v,h){for(var n=0;n<16;n++)l[n]=v[n]-h[n]}function y(l,v,h){var n,o,N=0,U=0,T=0,L=0,B=0,A=0,F=0,R=0,I=0,M=0,G=0,k=0,Q=0,J=0,C=0,j=0,$=0,V=0,H=0,K=0,x=0,W=0,Y=0,q=0,X=0,Fe=0,Ve=0,Ye=0,ot=0,Wt=0,mn=0,re=h[0],ne=h[1],ie=h[2],ae=h[3],oe=h[4],se=h[5],ue=h[6],ce=h[7],fe=h[8],he=h[9],le=h[10],de=h[11],De=h[12],Ee=h[13],_e=h[14],ve=h[15];n=v[0],N+=n*re,U+=n*ne,T+=n*ie,L+=n*ae,B+=n*oe,A+=n*se,F+=n*ue,R+=n*ce,I+=n*fe,M+=n*he,G+=n*le,k+=n*de,Q+=n*De,J+=n*Ee,C+=n*_e,j+=n*ve,n=v[1],U+=n*re,T+=n*ne,L+=n*ie,B+=n*ae,A+=n*oe,F+=n*se,R+=n*ue,I+=n*ce,M+=n*fe,G+=n*he,k+=n*le,Q+=n*de,J+=n*De,C+=n*Ee,j+=n*_e,$+=n*ve,n=v[2],T+=n*re,L+=n*ne,B+=n*ie,A+=n*ae,F+=n*oe,R+=n*se,I+=n*ue,M+=n*ce,G+=n*fe,k+=n*he,Q+=n*le,J+=n*de,C+=n*De,j+=n*Ee,$+=n*_e,V+=n*ve,n=v[3],L+=n*re,B+=n*ne,A+=n*ie,F+=n*ae,R+=n*oe,I+=n*se,M+=n*ue,G+=n*ce,k+=n*fe,Q+=n*he,J+=n*le,C+=n*de,j+=n*De,$+=n*Ee,V+=n*_e,H+=n*ve,n=v[4],B+=n*re,A+=n*ne,F+=n*ie,R+=n*ae,I+=n*oe,M+=n*se,G+=n*ue,k+=n*ce,Q+=n*fe,J+=n*he,C+=n*le,j+=n*de,$+=n*De,V+=n*Ee,H+=n*_e,K+=n*ve,n=v[5],A+=n*re,F+=n*ne,R+=n*ie,I+=n*ae,M+=n*oe,G+=n*se,k+=n*ue,Q+=n*ce,J+=n*fe,C+=n*he,j+=n*le,$+=n*de,V+=n*De,H+=n*Ee,K+=n*_e,x+=n*ve,n=v[6],F+=n*re,R+=n*ne,I+=n*ie,M+=n*ae,G+=n*oe,k+=n*se,Q+=n*ue,J+=n*ce,C+=n*fe,j+=n*he,$+=n*le,V+=n*de,H+=n*De,K+=n*Ee,x+=n*_e,W+=n*ve,n=v[7],R+=n*re,I+=n*ne,M+=n*ie,G+=n*ae,k+=n*oe,Q+=n*se,J+=n*ue,C+=n*ce,j+=n*fe,$+=n*he,V+=n*le,H+=n*de,K+=n*De,x+=n*Ee,W+=n*_e,Y+=n*ve,n=v[8],I+=n*re,M+=n*ne,G+=n*ie,k+=n*ae,Q+=n*oe,J+=n*se,C+=n*ue,j+=n*ce,$+=n*fe,V+=n*he,H+=n*le,K+=n*de,x+=n*De,W+=n*Ee,Y+=n*_e,q+=n*ve,n=v[9],M+=n*re,G+=n*ne,k+=n*ie,Q+=n*ae,J+=n*oe,C+=n*se,j+=n*ue,$+=n*ce,V+=n*fe,H+=n*he,K+=n*le,x+=n*de,W+=n*De,Y+=n*Ee,q+=n*_e,X+=n*ve,n=v[10],G+=n*re,k+=n*ne,Q+=n*ie,J+=n*ae,C+=n*oe,j+=n*se,$+=n*ue,V+=n*ce,H+=n*fe,K+=n*he,x+=n*le,W+=n*de,Y+=n*De,q+=n*Ee,X+=n*_e,Fe+=n*ve,n=v[11],k+=n*re,Q+=n*ne,J+=n*ie,C+=n*ae,j+=n*oe,$+=n*se,V+=n*ue,H+=n*ce,K+=n*fe,x+=n*he,W+=n*le,Y+=n*de,q+=n*De,X+=n*Ee,Fe+=n*_e,Ve+=n*ve,n=v[12],Q+=n*re,J+=n*ne,C+=n*ie,j+=n*ae,$+=n*oe,V+=n*se,H+=n*ue,K+=n*ce,x+=n*fe,W+=n*he,Y+=n*le,q+=n*de,X+=n*De,Fe+=n*Ee,Ve+=n*_e,Ye+=n*ve,n=v[13],J+=n*re,C+=n*ne,j+=n*ie,$+=n*ae,V+=n*oe,H+=n*se,K+=n*ue,x+=n*ce,W+=n*fe,Y+=n*he,q+=n*le,X+=n*de,Fe+=n*De,Ve+=n*Ee,Ye+=n*_e,ot+=n*ve,n=v[14],C+=n*re,j+=n*ne,$+=n*ie,V+=n*ae,H+=n*oe,K+=n*se,x+=n*ue,W+=n*ce,Y+=n*fe,q+=n*he,X+=n*le,Fe+=n*de,Ve+=n*De,Ye+=n*Ee,ot+=n*_e,Wt+=n*ve,n=v[15],j+=n*re,$+=n*ne,V+=n*ie,H+=n*ae,K+=n*oe,x+=n*se,W+=n*ue,Y+=n*ce,q+=n*fe,X+=n*he,Fe+=n*le,Ve+=n*de,Ye+=n*De,ot+=n*Ee,Wt+=n*_e,mn+=n*ve,N+=38*$,U+=38*V,T+=38*H,L+=38*K,B+=38*x,A+=38*W,F+=38*Y,R+=38*q,I+=38*X,M+=38*Fe,G+=38*Ve,k+=38*Ye,Q+=38*ot,J+=38*Wt,C+=38*mn,o=1,n=N+o+65535,o=Math.floor(n/65536),N=n-o*65536,n=U+o+65535,o=Math.floor(n/65536),U=n-o*65536,n=T+o+65535,o=Math.floor(n/65536),T=n-o*65536,n=L+o+65535,o=Math.floor(n/65536),L=n-o*65536,n=B+o+65535,o=Math.floor(n/65536),B=n-o*65536,n=A+o+65535,o=Math.floor(n/65536),A=n-o*65536,n=F+o+65535,o=Math.floor(n/65536),F=n-o*65536,n=R+o+65535,o=Math.floor(n/65536),R=n-o*65536,n=I+o+65535,o=Math.floor(n/65536),I=n-o*65536,n=M+o+65535,o=Math.floor(n/65536),M=n-o*65536,n=G+o+65535,o=Math.floor(n/65536),G=n-o*65536,n=k+o+65535,o=Math.floor(n/65536),k=n-o*65536,n=Q+o+65535,o=Math.floor(n/65536),Q=n-o*65536,n=J+o+65535,o=Math.floor(n/65536),J=n-o*65536,n=C+o+65535,o=Math.floor(n/65536),C=n-o*65536,n=j+o+65535,o=Math.floor(n/65536),j=n-o*65536,N+=o-1+37*(o-1),o=1,n=N+o+65535,o=Math.floor(n/65536),N=n-o*65536,n=U+o+65535,o=Math.floor(n/65536),U=n-o*65536,n=T+o+65535,o=Math.floor(n/65536),T=n-o*65536,n=L+o+65535,o=Math.floor(n/65536),L=n-o*65536,n=B+o+65535,o=Math.floor(n/65536),B=n-o*65536,n=A+o+65535,o=Math.floor(n/65536),A=n-o*65536,n=F+o+65535,o=Math.floor(n/65536),F=n-o*65536,n=R+o+65535,o=Math.floor(n/65536),R=n-o*65536,n=I+o+65535,o=Math.floor(n/65536),I=n-o*65536,n=M+o+65535,o=Math.floor(n/65536),M=n-o*65536,n=G+o+65535,o=Math.floor(n/65536),G=n-o*65536,n=k+o+65535,o=Math.floor(n/65536),k=n-o*65536,n=Q+o+65535,o=Math.floor(n/65536),Q=n-o*65536,n=J+o+65535,o=Math.floor(n/65536),J=n-o*65536,n=C+o+65535,o=Math.floor(n/65536),C=n-o*65536,n=j+o+65535,o=Math.floor(n/65536),j=n-o*65536,N+=o-1+37*(o-1),l[0]=N,l[1]=U,l[2]=T,l[3]=L,l[4]=B,l[5]=A,l[6]=F,l[7]=R,l[8]=I,l[9]=M,l[10]=G,l[11]=k,l[12]=Q,l[13]=J,l[14]=C,l[15]=j}function _(l,v){y(l,v,v)}function m(l,v){for(var h=i(),n=0;n<16;n++)h[n]=v[n];for(var n=253;n>=0;n--)_(h,h),n!==2&&n!==4&&y(h,h,v);for(var n=0;n<16;n++)l[n]=h[n]}function O(l,v){for(var h=new Uint8Array(32),n=new Float64Array(80),o=i(),N=i(),U=i(),T=i(),L=i(),B=i(),A=0;A<31;A++)h[A]=l[A];h[31]=l[31]&127|64,h[0]&=248,w(n,v);for(var A=0;A<16;A++)N[A]=n[A];o[0]=T[0]=1;for(var A=254;A>=0;--A){var F=h[A>>>3]>>>(A&7)&1;s(o,N,F),s(U,T,F),b(L,o,U),S(o,o,U),b(U,N,T),S(N,N,T),_(T,L),_(B,o),y(o,U,o),y(U,N,L),b(L,o,U),S(o,o,U),_(N,o),S(U,T,B),y(o,U,f),b(o,o,T),y(U,U,o),y(o,T,B),y(T,N,n),_(N,L),s(o,N,F),s(U,T,F)}for(var A=0;A<16;A++)n[A+16]=o[A],n[A+32]=U[A],n[A+48]=N[A],n[A+64]=T[A];var R=n.subarray(32),I=n.subarray(16);m(R,R),y(I,I,R);var M=new Uint8Array(32);return c(M,I),M}e.scalarMult=O;function u(l){return O(l,a)}e.scalarMultBase=u;function D(l){if(l.length!==e.SECRET_KEY_LENGTH)throw new Error("x25519: seed must be "+e.SECRET_KEY_LENGTH+" bytes");var v=new Uint8Array(l),h=u(v);return{publicKey:h,secretKey:v}}e.generateKeyPairFromSeed=D;function p(l){var v=t.randomBytes(32,l),h=D(v);return r.wipe(v),h}e.generateKeyPair=p;function g(l,v,h){if(h===void 0&&(h=!1),l.length!==e.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(v.length!==e.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");var n=O(l,v);if(h){for(var o=0,N=0;N<n.length;N++)o|=n[N];if(o===0)throw new Error("X25519: invalid shared key")}return n}e.sharedKey=g})(gt);function hr(e,t){t||(t=e.reduce((a,f)=>a+f.length,0));const r=new Uint8Array(t);let i=0;for(const a of e)r.set(a,i),i+=a.length;return r}function gi(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var a=0;a<e.length;a++){var f=e.charAt(a),d=f.charCodeAt(0);if(r[d]!==255)throw new TypeError(f+" is ambiguous");r[d]=a}var s=e.length,c=e.charAt(0),w=Math.log(s)/Math.log(256),b=Math.log(256)/Math.log(s);function S(m){if(m instanceof Uint8Array||(ArrayBuffer.isView(m)?m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength):Array.isArray(m)&&(m=Uint8Array.from(m))),!(m instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(m.length===0)return"";for(var O=0,u=0,D=0,p=m.length;D!==p&&m[D]===0;)D++,O++;for(var g=(p-D)*b+1>>>0,l=new Uint8Array(g);D!==p;){for(var v=m[D],h=0,n=g-1;(v!==0||h<u)&&n!==-1;n--,h++)v+=256*l[n]>>>0,l[n]=v%s>>>0,v=v/s>>>0;if(v!==0)throw new Error("Non-zero carry");u=h,D++}for(var o=g-u;o!==g&&l[o]===0;)o++;for(var N=c.repeat(O);o<g;++o)N+=e.charAt(l[o]);return N}function y(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return new Uint8Array;var O=0;if(m[O]!==" "){for(var u=0,D=0;m[O]===c;)u++,O++;for(var p=(m.length-O)*w+1>>>0,g=new Uint8Array(p);m[O];){var l=r[m.charCodeAt(O)];if(l===255)return;for(var v=0,h=p-1;(l!==0||v<D)&&h!==-1;h--,v++)l+=s*g[h]>>>0,g[h]=l%256>>>0,l=l/256>>>0;if(l!==0)throw new Error("Non-zero carry");D=v,O++}if(m[O]!==" "){for(var n=p-D;n!==p&&g[n]===0;)n++;for(var o=new Uint8Array(u+(p-n)),N=u;n!==p;)o[N++]=g[n++];return o}}}function _(m){var O=y(m);if(O)return O;throw new Error(`Non-${t} character`)}return{encode:S,decodeUnsafe:y,decode:_}}var wi=gi,yi=wi;const lr=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},mi=e=>new TextEncoder().encode(e),pi=e=>new TextDecoder().decode(e);class Si{constructor(t,r,i){this.name=t,this.prefix=r,this.baseEncode=i}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class Oi{constructor(t,r,i){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=i}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return dr(this,t)}}class Ni{constructor(t){this.decoders=t}or(t){return dr(this,t)}decode(t){const r=t[0],i=this.decoders[r];if(i)return i.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const dr=(e,t)=>new Ni({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class Ai{constructor(t,r,i,a){this.name=t,this.prefix=r,this.baseEncode=i,this.baseDecode=a,this.encoder=new Si(t,r,i),this.decoder=new Oi(t,r,a)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const ke=({name:e,prefix:t,encode:r,decode:i})=>new Ai(e,t,r,i),Ke=({prefix:e,name:t,alphabet:r})=>{const{encode:i,decode:a}=yi(r,t);return ke({prefix:e,name:t,encode:i,decode:f=>lr(a(f))})},Ci=(e,t,r,i)=>{const a={};for(let b=0;b<t.length;++b)a[t[b]]=b;let f=e.length;for(;e[f-1]==="=";)--f;const d=new Uint8Array(f*r/8|0);let s=0,c=0,w=0;for(let b=0;b<f;++b){const S=a[e[b]];if(S===void 0)throw new SyntaxError(`Non-${i} character`);c=c<<r|S,s+=r,s>=8&&(s-=8,d[w++]=255&c>>s)}if(s>=r||255&c<<8-s)throw new SyntaxError("Unexpected end of data");return d},Ui=(e,t,r)=>{const i=t[t.length-1]==="=",a=(1<<r)-1;let f="",d=0,s=0;for(let c=0;c<e.length;++c)for(s=s<<8|e[c],d+=8;d>r;)d-=r,f+=t[a&s>>d];if(d&&(f+=t[a&s<<r-d]),i)for(;f.length*r&7;)f+="=";return f},Z=({name:e,prefix:t,bitsPerChar:r,alphabet:i})=>ke({prefix:t,name:e,encode(a){return Ui(a,i,r)},decode(a){return Ci(a,i,r,e)}}),Ti=ke({prefix:"\0",name:"identity",encode:e=>pi(e),decode:e=>mi(e)});var Ii=Object.freeze({__proto__:null,identity:Ti});const Mi=Z({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Fi=Object.freeze({__proto__:null,base2:Mi});const Ri=Z({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Pi=Object.freeze({__proto__:null,base8:Ri});const Li=Ke({prefix:"9",name:"base10",alphabet:"0123456789"});var Bi=Object.freeze({__proto__:null,base10:Li});const ji=Z({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),$i=Z({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Vi=Object.freeze({__proto__:null,base16:ji,base16upper:$i});const Hi=Z({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Ki=Z({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),xi=Z({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Wi=Z({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),zi=Z({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Yi=Z({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),qi=Z({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Gi=Z({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Xi=Z({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Ji=Object.freeze({__proto__:null,base32:Hi,base32upper:Ki,base32pad:xi,base32padupper:Wi,base32hex:zi,base32hexupper:Yi,base32hexpad:qi,base32hexpadupper:Gi,base32z:Xi});const Qi=Ke({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),ki=Ke({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Zi=Object.freeze({__proto__:null,base36:Qi,base36upper:ki});const ea=Ke({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),ta=Ke({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var ra=Object.freeze({__proto__:null,base58btc:ea,base58flickr:ta});const na=Z({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),ia=Z({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),aa=Z({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),oa=Z({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var sa=Object.freeze({__proto__:null,base64:na,base64pad:ia,base64url:aa,base64urlpad:oa});const Dr=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),ua=Dr.reduce((e,t,r)=>(e[r]=t,e),[]),ca=Dr.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]);function fa(e){return e.reduce((t,r)=>(t+=ua[r],t),"")}function ha(e){const t=[];for(const r of e){const i=ca[r.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(i)}return new Uint8Array(t)}const la=ke({prefix:"\u{1F680}",name:"base256emoji",encode:fa,decode:ha});var da=Object.freeze({__proto__:null,base256emoji:la}),Da=_r,Er=128,Ea=127,_a=~Ea,va=Math.pow(2,31);function _r(e,t,r){t=t||[],r=r||0;for(var i=r;e>=va;)t[r++]=e&255|Er,e/=128;for(;e&_a;)t[r++]=e&255|Er,e>>>=7;return t[r]=e|0,_r.bytes=r-i+1,t}var ba=wt,ga=128,vr=127;function wt(e,i){var r=0,i=i||0,a=0,f=i,d,s=e.length;do{if(f>=s)throw wt.bytes=0,new RangeError("Could not decode varint");d=e[f++],r+=a<28?(d&vr)<<a:(d&vr)*Math.pow(2,a),a+=7}while(d>=ga);return wt.bytes=f-i,r}var wa=Math.pow(2,7),ya=Math.pow(2,14),ma=Math.pow(2,21),pa=Math.pow(2,28),Sa=Math.pow(2,35),Oa=Math.pow(2,42),Na=Math.pow(2,49),Aa=Math.pow(2,56),Ca=Math.pow(2,63),Ua=function(e){return e<wa?1:e<ya?2:e<ma?3:e<pa?4:e<Sa?5:e<Oa?6:e<Na?7:e<Aa?8:e<Ca?9:10},Ta={encode:Da,decode:ba,encodingLength:Ua},br=Ta;const gr=(e,t,r=0)=>(br.encode(e,t,r),t),wr=e=>br.encodingLength(e),yt=(e,t)=>{const r=t.byteLength,i=wr(e),a=i+wr(r),f=new Uint8Array(a+r);return gr(e,f,0),gr(r,f,i),f.set(t,a),new Ia(e,r,t,f)};class Ia{constructor(t,r,i,a){this.code=t,this.size=r,this.digest=i,this.bytes=a}}const yr=({name:e,code:t,encode:r})=>new Ma(e,t,r);class Ma{constructor(t,r,i){this.name=t,this.code=r,this.encode=i}digest(t){if(t instanceof Uint8Array){const r=this.encode(t);return r instanceof Uint8Array?yt(this.code,r):r.then(i=>yt(this.code,i))}else throw Error("Unknown type, must be binary type")}}const mr=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),Fa=yr({name:"sha2-256",code:18,encode:mr("SHA-256")}),Ra=yr({name:"sha2-512",code:19,encode:mr("SHA-512")});var Pa=Object.freeze({__proto__:null,sha256:Fa,sha512:Ra});const pr=0,La="identity",Sr=lr;var Ba=Object.freeze({__proto__:null,identity:{code:pr,name:La,encode:Sr,digest:e=>yt(pr,Sr(e))}});new TextEncoder,new TextDecoder;const Or={...Ii,...Fi,...Pi,...Bi,...Vi,...Ji,...Zi,...ra,...sa,...da};({...Pa,...Ba});function Nr(e,t,r,i){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:i}}}const Ar=Nr("utf8","u",e=>{const t=new TextDecoder("utf8");return"u"+t.decode(e)},e=>new TextEncoder().encode(e.substring(1))),mt=Nr("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{e=e.substring(1);const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),Cr={utf8:Ar,"utf-8":Ar,hex:Or.base16,latin1:mt,ascii:mt,binary:mt,...Or};function me(e,t="utf8"){const r=Cr[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return r.decoder.decode(`${r.prefix}${e}`)}function pe(e,t="utf8"){const r=Cr[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return r.encoder.encode(e).substring(1)}const pt="base10",be="base16",Ze="base64pad",et="utf8",St=0,Re=1,ja=0,Ur=1,Ot=12,Nt=32;function $a(){const e=gt.generateKeyPair();return{privateKey:pe(e.secretKey,be),publicKey:pe(e.publicKey,be)}}function Va(){const e=Je.randomBytes(Nt);return pe(e,be)}function Ha(e,t){const r=gt.sharedKey(me(e,be),me(t,be)),i=new ui(Qe.SHA256,r).expand(Nt);return pe(i,be)}function Ka(e){const t=Qe.hash(me(e,be));return pe(t,be)}function xa(e){const t=Qe.hash(me(e,et));return pe(t,be)}function Tr(e){return me(`${e}`,pt)}function xe(e){return Number(pe(e,pt))}function Wa(e){const t=Tr(typeof e.type<"u"?e.type:St);if(xe(t)===Re&&typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof e.senderPublicKey<"u"?me(e.senderPublicKey,be):void 0,i=typeof e.iv<"u"?me(e.iv,be):Je.randomBytes(Ot),a=new ct.ChaCha20Poly1305(me(e.symKey,be)).seal(i,me(e.message,et));return Ir({type:t,sealed:a,iv:i,senderPublicKey:r})}function za(e){const t=new ct.ChaCha20Poly1305(me(e.symKey,be)),{sealed:r,iv:i}=At(e.encoded),a=t.open(i,r);if(a===null)throw new Error("Failed to decrypt");return pe(a,et)}function Ir(e){if(xe(e.type)===Re){if(typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return pe(hr([e.type,e.senderPublicKey,e.iv,e.sealed]),Ze)}return pe(hr([e.type,e.iv,e.sealed]),Ze)}function At(e){const t=me(e,Ze),r=t.slice(ja,Ur),i=Ur;if(xe(r)===Re){const s=i+Nt,c=s+Ot,w=t.slice(i,s),b=t.slice(s,c),S=t.slice(c);return{type:r,sealed:S,iv:b,senderPublicKey:w}}const a=i+Ot,f=t.slice(i,a),d=t.slice(a);return{type:r,sealed:d,iv:f}}function Ya(e,t){const r=At(e);return Mr({type:xe(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?pe(r.senderPublicKey,be):void 0,receiverPublicKey:t?.receiverPublicKey})}function Mr(e){const t=e?.type||St;if(t===Re){if(typeof e?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function qa(e){return e.type===Re&&typeof e.senderPublicKey=="string"&&typeof e.receiverPublicKey=="string"}var Fr=function(e,t,r){if(r||arguments.length===2)for(var i=0,a=t.length,f;i<a;i++)(f||!(i in t))&&(f||(f=Array.prototype.slice.call(t,0,i)),f[i]=t[i]);return e.concat(f||Array.prototype.slice.call(t))},Ga=function(){function e(t,r,i){this.name=t,this.version=r,this.os=i,this.type="browser"}return e}(),Xa=function(){function e(t){this.version=t,this.type="node",this.name="node",this.os=process.platform}return e}(),Ja=function(){function e(t,r,i,a){this.name=t,this.version=r,this.os=i,this.bot=a,this.type="bot-device"}return e}(),Qa=function(){function e(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return e}(),ka=function(){function e(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return e}(),Za=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,eo=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Rr=3,to=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Za]],Pr=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function ro(e){return e?Lr(e):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new ka:typeof navigator<"u"?Lr(navigator.userAgent):ao()}function no(e){return e!==""&&to.reduce(function(t,r){var i=r[0],a=r[1];if(t)return t;var f=a.exec(e);return!!f&&[i,f]},!1)}function Lr(e){var t=no(e);if(!t)return null;var r=t[0],i=t[1];if(r==="searchbot")return new Qa;var a=i[1]&&i[1].split(".").join("_").split("_").slice(0,3);a?a.length<Rr&&(a=Fr(Fr([],a,!0),oo(Rr-a.length),!0)):a=[];var f=a.join("."),d=io(e),s=eo.exec(e);return s&&s[1]?new Ja(r,f,d,s[1]):new Ga(r,f,d)}function io(e){for(var t=0,r=Pr.length;t<r;t++){var i=Pr[t],a=i[0],f=i[1],d=f.exec(e);if(d)return a}return null}function ao(){var e=typeof process<"u"&&process.version;return e?new Xa(process.version.slice(1)):null}function oo(e){for(var t=[],r=0;r<e;r++)t.push("0");return t}var Te={},Br={},tt={};Object.defineProperty(tt,"__esModule",{value:!0}),tt.delay=void 0;function so(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}tt.delay=so;var Pe={},Ct={},Le={};Object.defineProperty(Le,"__esModule",{value:!0}),Le.ONE_THOUSAND=Le.ONE_HUNDRED=void 0,Le.ONE_HUNDRED=100,Le.ONE_THOUSAND=1e3;var jr={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ONE_YEAR=e.FOUR_WEEKS=e.THREE_WEEKS=e.TWO_WEEKS=e.ONE_WEEK=e.THIRTY_DAYS=e.SEVEN_DAYS=e.FIVE_DAYS=e.THREE_DAYS=e.ONE_DAY=e.TWENTY_FOUR_HOURS=e.TWELVE_HOURS=e.SIX_HOURS=e.THREE_HOURS=e.ONE_HOUR=e.SIXTY_MINUTES=e.THIRTY_MINUTES=e.TEN_MINUTES=e.FIVE_MINUTES=e.ONE_MINUTE=e.SIXTY_SECONDS=e.THIRTY_SECONDS=e.TEN_SECONDS=e.FIVE_SECONDS=e.ONE_SECOND=void 0,e.ONE_SECOND=1,e.FIVE_SECONDS=5,e.TEN_SECONDS=10,e.THIRTY_SECONDS=30,e.SIXTY_SECONDS=60,e.ONE_MINUTE=e.SIXTY_SECONDS,e.FIVE_MINUTES=e.ONE_MINUTE*5,e.TEN_MINUTES=e.ONE_MINUTE*10,e.THIRTY_MINUTES=e.ONE_MINUTE*30,e.SIXTY_MINUTES=e.ONE_MINUTE*60,e.ONE_HOUR=e.SIXTY_MINUTES,e.THREE_HOURS=e.ONE_HOUR*3,e.SIX_HOURS=e.ONE_HOUR*6,e.TWELVE_HOURS=e.ONE_HOUR*12,e.TWENTY_FOUR_HOURS=e.ONE_HOUR*24,e.ONE_DAY=e.TWENTY_FOUR_HOURS,e.THREE_DAYS=e.ONE_DAY*3,e.FIVE_DAYS=e.ONE_DAY*5,e.SEVEN_DAYS=e.ONE_DAY*7,e.THIRTY_DAYS=e.ONE_DAY*30,e.ONE_WEEK=e.SEVEN_DAYS,e.TWO_WEEKS=e.ONE_WEEK*2,e.THREE_WEEKS=e.ONE_WEEK*3,e.FOUR_WEEKS=e.ONE_WEEK*4,e.ONE_YEAR=e.ONE_DAY*365})(jr),function(e){var t=ee&&ee.__createBinding||(Object.create?function(i,a,f,d){d===void 0&&(d=f),Object.defineProperty(i,d,{enumerable:!0,get:function(){return a[f]}})}:function(i,a,f,d){d===void 0&&(d=f),i[d]=a[f]}),r=ee&&ee.__exportStar||function(i,a){for(var f in i)f!=="default"&&!a.hasOwnProperty(f)&&t(a,i,f)};Object.defineProperty(e,"__esModule",{value:!0}),r(Le,e),r(jr,e)}(Ct),Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.fromMiliseconds=Pe.toMiliseconds=void 0;const $r=Ct;function uo(e){return e*$r.ONE_THOUSAND}Pe.toMiliseconds=uo;function co(e){return Math.floor(e/$r.ONE_THOUSAND)}Pe.fromMiliseconds=co,function(e){var t=ee&&ee.__createBinding||(Object.create?function(i,a,f,d){d===void 0&&(d=f),Object.defineProperty(i,d,{enumerable:!0,get:function(){return a[f]}})}:function(i,a,f,d){d===void 0&&(d=f),i[d]=a[f]}),r=ee&&ee.__exportStar||function(i,a){for(var f in i)f!=="default"&&!a.hasOwnProperty(f)&&t(a,i,f)};Object.defineProperty(e,"__esModule",{value:!0}),r(tt,e),r(Pe,e)}(Br);var We={};Object.defineProperty(We,"__esModule",{value:!0}),We.Watch=void 0;class Vr{constructor(){this.timestamps=new Map}start(t){if(this.timestamps.has(t))throw new Error(`Watch already started for label: ${t}`);this.timestamps.set(t,{started:Date.now()})}stop(t){const r=this.get(t);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${t}`);const i=Date.now()-r.started;this.timestamps.set(t,{started:r.started,elapsed:i})}get(t){const r=this.timestamps.get(t);if(typeof r>"u")throw new Error(`No timestamp found for label: ${t}`);return r}elapsed(t){const r=this.get(t);return r.elapsed||Date.now()-r.started}}We.Watch=Vr,We.default=Vr;var Hr={},rt={};Object.defineProperty(rt,"__esModule",{value:!0}),rt.IWatch=void 0;class fo{}rt.IWatch=fo,function(e){var t=ee&&ee.__createBinding||(Object.create?function(i,a,f,d){d===void 0&&(d=f),Object.defineProperty(i,d,{enumerable:!0,get:function(){return a[f]}})}:function(i,a,f,d){d===void 0&&(d=f),i[d]=a[f]}),r=ee&&ee.__exportStar||function(i,a){for(var f in i)f!=="default"&&!a.hasOwnProperty(f)&&t(a,i,f)};Object.defineProperty(e,"__esModule",{value:!0}),r(rt,e)}(Hr),function(e){var t=ee&&ee.__createBinding||(Object.create?function(i,a,f,d){d===void 0&&(d=f),Object.defineProperty(i,d,{enumerable:!0,get:function(){return a[f]}})}:function(i,a,f,d){d===void 0&&(d=f),i[d]=a[f]}),r=ee&&ee.__exportStar||function(i,a){for(var f in i)f!=="default"&&!a.hasOwnProperty(f)&&t(a,i,f)};Object.defineProperty(e,"__esModule",{value:!0}),r(Br,e),r(We,e),r(Hr,e),r(Ct,e)}(Te);var z={};Object.defineProperty(z,"__esModule",{value:!0}),z.getLocalStorage=z.getLocalStorageOrThrow=z.getCrypto=z.getCryptoOrThrow=Tt=z.getLocation=z.getLocationOrThrow=Ut=z.getNavigator=z.getNavigatorOrThrow=Kr=z.getDocument=z.getDocumentOrThrow=z.getFromWindowOrThrow=z.getFromWindow=void 0;function Ie(e){let t;return typeof window<"u"&&typeof window[e]<"u"&&(t=window[e]),t}z.getFromWindow=Ie;function Be(e){const t=Ie(e);if(!t)throw new Error(`${e} is not defined in Window`);return t}z.getFromWindowOrThrow=Be;function ho(){return Be("document")}z.getDocumentOrThrow=ho;function lo(){return Ie("document")}var Kr=z.getDocument=lo;function Do(){return Be("navigator")}z.getNavigatorOrThrow=Do;function Eo(){return Ie("navigator")}var Ut=z.getNavigator=Eo;function _o(){return Be("location")}z.getLocationOrThrow=_o;function vo(){return Ie("location")}var Tt=z.getLocation=vo;function bo(){return Be("crypto")}z.getCryptoOrThrow=bo;function go(){return Ie("crypto")}z.getCrypto=go;function wo(){return Be("localStorage")}z.getLocalStorageOrThrow=wo;function yo(){return Ie("localStorage")}z.getLocalStorage=yo;var It={};Object.defineProperty(It,"__esModule",{value:!0});var xr=It.getWindowMetadata=void 0;const Wr=z;function mo(){let e,t;try{e=Wr.getDocumentOrThrow(),t=Wr.getLocationOrThrow()}catch{return null}function r(){const S=e.getElementsByTagName("link"),y=[];for(let _=0;_<S.length;_++){const m=S[_],O=m.getAttribute("rel");if(O&&O.toLowerCase().indexOf("icon")>-1){const u=m.getAttribute("href");if(u)if(u.toLowerCase().indexOf("https:")===-1&&u.toLowerCase().indexOf("http:")===-1&&u.indexOf("//")!==0){let D=t.protocol+"//"+t.host;if(u.indexOf("/")===0)D+=u;else{const p=t.pathname.split("/");p.pop(),D+=p.join("/")+"/"+u}y.push(D)}else if(u.indexOf("//")===0){const D=t.protocol+u;y.push(D)}else y.push(u)}}return y}function i(...S){const y=e.getElementsByTagName("meta");for(let _=0;_<y.length;_++){const m=y[_],O=["itemprop","property","name"].map(u=>m.getAttribute(u)).filter(u=>u?S.includes(u):!1);if(O.length&&O){const u=m.getAttribute("content");if(u)return u}}return""}function a(){let S=i("name","og:site_name","og:title","twitter:title");return S||(S=e.title),S}function f(){return i("description","og:description","twitter:description","keywords")}const d=a(),s=f(),c=t.origin,w=r();return{description:s,url:c,icons:w,name:d}}xr=It.getWindowMetadata=mo;var ze={},po=e=>encodeURIComponent(e).replace(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),zr="%[a-f0-9]{2}",Yr=new RegExp(zr,"gi"),qr=new RegExp("("+zr+")+","gi");function Mt(e,t){try{return decodeURIComponent(e.join(""))}catch{}if(e.length===1)return e;t=t||1;var r=e.slice(0,t),i=e.slice(t);return Array.prototype.concat.call([],Mt(r),Mt(i))}function So(e){try{return decodeURIComponent(e)}catch{for(var t=e.match(Yr),r=1;r<t.length;r++)e=Mt(t,r).join(""),t=e.match(Yr);return e}}function Oo(e){for(var t={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},r=qr.exec(e);r;){try{t[r[0]]=decodeURIComponent(r[0])}catch{var i=So(r[0]);i!==r[0]&&(t[r[0]]=i)}r=qr.exec(e)}t["%C2"]="\uFFFD";for(var a=Object.keys(t),f=0;f<a.length;f++){var d=a[f];e=e.replace(new RegExp(d,"g"),t[d])}return e}var No=function(e){if(typeof e!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch{return Oo(e)}},Ao=(e,t)=>{if(!(typeof e=="string"&&typeof t=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(t==="")return[e];const r=e.indexOf(t);return r===-1?[e]:[e.slice(0,r),e.slice(r+t.length)]};(function(e){const t=po,r=No,i=Ao,a=u=>u==null;function f(u){switch(u.arrayFormat){case"index":return D=>(p,g)=>{const l=p.length;return g===void 0||u.skipNull&&g===null||u.skipEmptyString&&g===""?p:g===null?[...p,[c(D,u),"[",l,"]"].join("")]:[...p,[c(D,u),"[",c(l,u),"]=",c(g,u)].join("")]};case"bracket":return D=>(p,g)=>g===void 0||u.skipNull&&g===null||u.skipEmptyString&&g===""?p:g===null?[...p,[c(D,u),"[]"].join("")]:[...p,[c(D,u),"[]=",c(g,u)].join("")];case"comma":case"separator":return D=>(p,g)=>g==null||g.length===0?p:p.length===0?[[c(D,u),"=",c(g,u)].join("")]:[[p,c(g,u)].join(u.arrayFormatSeparator)];default:return D=>(p,g)=>g===void 0||u.skipNull&&g===null||u.skipEmptyString&&g===""?p:g===null?[...p,c(D,u)]:[...p,[c(D,u),"=",c(g,u)].join("")]}}function d(u){let D;switch(u.arrayFormat){case"index":return(p,g,l)=>{if(D=/\[(\d*)\]$/.exec(p),p=p.replace(/\[\d*\]$/,""),!D){l[p]=g;return}l[p]===void 0&&(l[p]={}),l[p][D[1]]=g};case"bracket":return(p,g,l)=>{if(D=/(\[\])$/.exec(p),p=p.replace(/\[\]$/,""),!D){l[p]=g;return}if(l[p]===void 0){l[p]=[g];return}l[p]=[].concat(l[p],g)};case"comma":case"separator":return(p,g,l)=>{const h=typeof g=="string"&&g.split("").indexOf(u.arrayFormatSeparator)>-1?g.split(u.arrayFormatSeparator).map(n=>w(n,u)):g===null?g:w(g,u);l[p]=h};default:return(p,g,l)=>{if(l[p]===void 0){l[p]=g;return}l[p]=[].concat(l[p],g)}}}function s(u){if(typeof u!="string"||u.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function c(u,D){return D.encode?D.strict?t(u):encodeURIComponent(u):u}function w(u,D){return D.decode?r(u):u}function b(u){return Array.isArray(u)?u.sort():typeof u=="object"?b(Object.keys(u)).sort((D,p)=>Number(D)-Number(p)).map(D=>u[D]):u}function S(u){const D=u.indexOf("#");return D!==-1&&(u=u.slice(0,D)),u}function y(u){let D="";const p=u.indexOf("#");return p!==-1&&(D=u.slice(p)),D}function _(u){u=S(u);const D=u.indexOf("?");return D===-1?"":u.slice(D+1)}function m(u,D){return D.parseNumbers&&!Number.isNaN(Number(u))&&typeof u=="string"&&u.trim()!==""?u=Number(u):D.parseBooleans&&u!==null&&(u.toLowerCase()==="true"||u.toLowerCase()==="false")&&(u=u.toLowerCase()==="true"),u}function O(u,D){D=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},D),s(D.arrayFormatSeparator);const p=d(D),g=Object.create(null);if(typeof u!="string"||(u=u.trim().replace(/^[?#&]/,""),!u))return g;for(const l of u.split("&")){let[v,h]=i(D.decode?l.replace(/\+/g," "):l,"=");h=h===void 0?null:["comma","separator"].includes(D.arrayFormat)?h:w(h,D),p(w(v,D),h,g)}for(const l of Object.keys(g)){const v=g[l];if(typeof v=="object"&&v!==null)for(const h of Object.keys(v))v[h]=m(v[h],D);else g[l]=m(v,D)}return D.sort===!1?g:(D.sort===!0?Object.keys(g).sort():Object.keys(g).sort(D.sort)).reduce((l,v)=>{const h=g[v];return Boolean(h)&&typeof h=="object"&&!Array.isArray(h)?l[v]=b(h):l[v]=h,l},Object.create(null))}e.extract=_,e.parse=O,e.stringify=(u,D)=>{if(!u)return"";D=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},D),s(D.arrayFormatSeparator);const p=h=>D.skipNull&&a(u[h])||D.skipEmptyString&&u[h]==="",g=f(D),l={};for(const h of Object.keys(u))p(h)||(l[h]=u[h]);const v=Object.keys(l);return D.sort!==!1&&v.sort(D.sort),v.map(h=>{const n=u[h];return n===void 0?"":n===null?c(h,D):Array.isArray(n)?n.reduce(g(h),[]).join("&"):c(h,D)+"="+c(n,D)}).filter(h=>h.length>0).join("&")},e.parseUrl=(u,D)=>{D=Object.assign({decode:!0},D);const[p,g]=i(u,"#");return Object.assign({url:p.split("?")[0]||"",query:O(_(u),D)},D&&D.parseFragmentIdentifier&&g?{fragmentIdentifier:w(g,D)}:{})},e.stringifyUrl=(u,D)=>{D=Object.assign({encode:!0,strict:!0},D);const p=S(u.url).split("?")[0]||"",g=e.extract(u.url),l=e.parse(g,{sort:!1}),v=Object.assign(l,u.query);let h=e.stringify(v,D);h&&(h=`?${h}`);let n=y(u.url);return u.fragmentIdentifier&&(n=`#${c(u.fragmentIdentifier,D)}`),`${p}${h}${n}`}})(ze);var Co=Object.defineProperty,Gr=Object.getOwnPropertySymbols,Uo=Object.prototype.hasOwnProperty,To=Object.prototype.propertyIsEnumerable,Xr=(e,t,r)=>t in e?Co(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Jr=(e,t)=>{for(var r in t||(t={}))Uo.call(t,r)&&Xr(e,r,t[r]);if(Gr)for(var r of Gr(t))To.call(t,r)&&Xr(e,r,t[r]);return e};const Qr="ReactNative",je={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},nt=" ",Io=":",kr="/",Ft=2,Mo=1e3,Zr="js";function Rt(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function en(){return!Kr()&&!!Ut()&&navigator.product===Qr}function tn(){return!Rt()&&!!Ut()}function Pt(){return en()?je.reactNative:Rt()?je.node:tn()?je.browser:je.unknown}function rn(e,t){let r=ze.parse(e);return r=Jr(Jr({},r),t),e=ze.stringify(r),e}function Fo(){return xr()||{name:"",description:"",url:"",icons:[""]}}function Ro(e,t){var r;const i=Pt(),a={protocol:e,version:t,env:i};return i==="browser"&&(a.host=((r=Tt())==null?void 0:r.host)||"unknown"),a}function nn(){const e=ro();if(e===null)return"unknown";const t=e.os?e.os.replace(" ","").toLowerCase():"unknown";return e.type==="browser"?[t,e.name,e.version].join("-"):[t,e.version].join("-")}function an(){var e;const t=Pt();return t===je.browser?[t,((e=Tt())==null?void 0:e.host)||"unknown"].join(":"):t}function on(e,t,r){const i=nn(),a=an();return[[e,t].join("-"),[Zr,r].join("-"),i,a].join("/")}function Po({protocol:e,version:t,relayUrl:r,sdkVersion:i,auth:a,projectId:f}){const d=r.split("?"),s=on(e,t,i),c={auth:a,ua:s,projectId:f},w=rn(d[1]||"",c);return d[0]+"?"+w}function Lo(e){let t=(e.match(/^[^:]+(?=:\/\/)/gi)||[])[0];const r=typeof t<"u"?e.split("://")[1]:e;return t=t==="wss"?"https":"http",[t,r].join("://")}function Bo(e,t,r){if(!e[t]||typeof e[t]!==r)throw new Error(`Missing or invalid "${t}" param`)}function sn(e,t=Ft){return un(e.split(kr),t)}function jo(e){return sn(e).join(nt)}function ge(e,t){return e.filter(r=>t.includes(r)).length===e.length}function un(e,t=Ft){return e.slice(Math.max(e.length-t,0))}function $o(e){return Object.fromEntries(e.entries())}function Vo(e){return new Map(Object.entries(e))}function Ho(e,t){const r={};return Object.keys(e).forEach(i=>{r[i]=t(e[i])}),r}const Ko=e=>e;function cn(e){return e.trim().replace(/^\w/,t=>t.toUpperCase())}function xo(e){return e.split(nt).map(t=>cn(t)).join(nt)}function Wo(e,t){return Te.fromMiliseconds((t||Date.now())+Te.toMiliseconds(e))}function zo(e){return Te.fromMiliseconds(Date.now())>=Te.toMiliseconds(e)}function Yo(){const e=Te.toMiliseconds(Te.FIVE_MINUTES);let t,r,i;return{resolve:a=>{i&&t&&(clearTimeout(i),t(a))},reject:a=>{i&&r&&(clearTimeout(i),r(a))},done:()=>new Promise((a,f)=>{i=setTimeout(f,e),t=a,r=f})}}function Lt(e,t){if(typeof t=="string"&&t.startsWith(`${e}:`))return t;if(e.toLowerCase()==="topic"){if(typeof t!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}else if(e.toLowerCase()==="id"){if(typeof t!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${e}`)}function qo(e){return Lt("topic",e)}function Go(e){return Lt("id",e)}function Xo(e){const[t,r]=e.split(":"),i={id:void 0,topic:void 0};if(t==="topic"&&typeof r=="string")i.topic=r;else if(t==="id"&&Number.isInteger(Number(r)))i.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${r}`);return i}function Jo(e,t){return`${e}${t?`:${t}`:""}`}const Qo={waku:{publish:"waku_publish",subscribe:"waku_subscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe"},iridium:{publish:"iridium_publish",subscribe:"iridium_subscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe"}},fn="iridium";function ko(e){return e?.relay||{protocol:fn}}function Zo(e){const t=Qo[e];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${e}`);return t}var es=Object.defineProperty,hn=Object.getOwnPropertySymbols,ts=Object.prototype.hasOwnProperty,rs=Object.prototype.propertyIsEnumerable,ln=(e,t,r)=>t in e?es(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ns=(e,t)=>{for(var r in t||(t={}))ts.call(t,r)&&ln(e,r,t[r]);if(hn)for(var r of hn(t))rs.call(t,r)&&ln(e,r,t[r]);return e};function dn(e,t="-"){const r={},i="relay"+t;return Object.keys(e).forEach(a=>{if(a.startsWith(i)){const f=a.replace(i,""),d=e[a];r[f]=d}}),r}function is(e){const t=e.indexOf(":"),r=e.indexOf("?")!==-1?e.indexOf("?"):void 0,i=e.substring(0,t),a=e.substring(t+1,r).split("@"),f=typeof r<"u"?e.substring(r):"",d=ze.parse(f);return{protocol:i,topic:a[0],version:parseInt(a[1],10),symKey:d.symKey,relay:dn(d)}}function Dn(e,t="-"){const r="relay",i={};return Object.keys(e).forEach(a=>{const f=r+t+a;e[a]&&(i[f]=e[a])}),i}function as(e){return`${e.protocol}:${e.topic}@${e.version}?`+ze.stringify(ns({symKey:e.symKey},Dn(e.relay)))}function Se(e){const t=[];return e.forEach(r=>{const[i,a]=r.split(":");t.push(`${i}:${a}`)}),t}function En(e){const t=[];return Object.values(e).forEach(r=>{t.push(...Se(r.accounts)),r.extension&&r.extension.forEach(i=>{t.push(...Se(i.accounts))})}),t}function _n(e,t){const r=[];return Object.values(e).forEach(i=>{Se(i.accounts).includes(t)&&r.push(...i.methods),i.extension&&i.extension.forEach(a=>{Se(a.accounts).includes(t)&&r.push(...a.methods)})}),r}function vn(e,t){const r=[];return Object.values(e).forEach(i=>{Se(i.accounts).includes(t)&&r.push(...i.events),i.extension&&i.extension.forEach(a=>{Se(a.accounts).includes(t)&&r.push(...a.events)})}),r}const os={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3}},ss={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Oe(e,t){const{message:r,code:i}=ss[e];return{message:t?`${r} ${t}`:r,code:i}}function Me(e,t){const{message:r,code:i}=os[e];return{message:t?`${r} ${t}`:r,code:i}}function $e(e,t){return Array.isArray(e)?typeof t<"u"&&e.length?e.every(t):!0:!1}function Bt(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function Ae(e){return typeof e>"u"}function we(e,t){return t&&Ae(e)?!0:typeof e=="string"&&Boolean(e.trim().length)}function jt(e,t){return t&&Ae(e)?!0:typeof e=="number"&&!isNaN(e)}function us(e,t){const{requiredNamespaces:r}=t,i=Object.keys(e.namespaces),a=Object.keys(r);let f=!0;return ge(a,i)?(i.forEach(d=>{const{accounts:s,methods:c,events:w,extension:b}=e.namespaces[d],S=Se(s),y=r[d];(!ge(y.chains,S)||!ge(y.methods,c)||!ge(y.events,w))&&(f=!1),f&&b&&b.forEach(_=>{var m;const{accounts:O,methods:u,events:D}=_,p=Se(O);(m=y.extension)!=null&&m.find(g=>ge(g.chains,p)&&ge(g.methods,u)&&ge(g.events,D))||(f=!1)})}),f):!1}function it(e){return we(e,!1)&&e.includes(":")?e.split(":").length===2:!1}function bn(e){if(we(e,!1)&&e.includes(":")){const t=e.split(":");if(t.length===3){const r=t[0]+":"+t[1];return!!t[2]&&it(r)}}return!1}function cs(e){if(we(e,!1))try{return typeof new URL(e)<"u"}catch{return!1}return!1}function fs(e){var t;return(t=e?.proposer)==null?void 0:t.publicKey}function hs(e){return e?.topic}function ls(e,t){let r=null;return we(e?.publicKey,!1)||(r=Oe("MISSING_OR_INVALID",`${t} controller public key should be a string`)),r}function at(e,t){let r=null;return Ae(e?.extension)||(!$e(e.extension)||!e.extension.length)&&(r=Oe("MISSING_OR_INVALID",`${t} extension should be an array of namespaces, or omitted`)),r}function $t(e){let t=!0;return $e(e)?e.length&&(t=e.every(r=>we(r,!1))):t=!1,t}function Vt(e,t,r){let i=null;return $e(t)?t.forEach(a=>{i||(!it(a)||!a.includes(e))&&(i=Me("UNSUPPORTED_CHAINS",`${r}, chain ${a} should be a string and conform to "namespace:chainId" format`))}):i=Me("UNSUPPORTED_CHAINS",`${r}, chains ${t} should be an array of strings conforming to "namespace:chainId" format`),i}function gn(e,t){let r=null;return Object.entries(e).forEach(([i,a])=>{if(r)return;const f=Vt(i,a?.chains,`${t} requiredNamespace`),d=at(a,t);f?r=f:d?r=d:a.extension&&a.extension.forEach(s=>{if(r)return;const c=Vt(i,s.chains,`${t} extension`);c&&(r=c)})}),r}function Ht(e,t){let r=null;return $e(e)?e.forEach(i=>{r||bn(i)||(r=Me("UNSUPPORTED_ACCOUNTS",`${t}, account ${i} should be a string and conform to "namespace:chainId:address" format`))}):r=Me("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function wn(e,t){let r=null;return Object.values(e).forEach(i=>{if(r)return;const a=Ht(i?.accounts,`${t} namespace`),f=at(i,t);a?r=a:f?r=f:i.extension&&i.extension.forEach(d=>{if(r)return;const s=Ht(d.accounts,`${t} extension`);s&&(r=s)})}),r}function Kt(e,t){let r=null;return $t(e?.methods)?$t(e?.events)||(r=Me("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):r=Me("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),r}function xt(e,t){let r=null;return Object.values(e).forEach(i=>{if(r)return;const a=Kt(i,`${t}, namespace`),f=at(i,t);a?r=a:f?r=f:i.extension&&i.extension.forEach(d=>{if(r)return;const s=Kt(d,`${t}, extension`);s&&(r=s)})}),r}function ds(e,t){let r=null;if(e&&Bt(e)){const i=xt(e,t);i&&(r=i);const a=gn(e,t);a&&(r=a)}else r=Oe("MISSING_OR_INVALID",`${t}, requiredNamespaces should be an object with data`);return r}function Ds(e,t){let r=null;if(e&&Bt(e)){const i=xt(e,t);i&&(r=i);const a=wn(e,t);a&&(r=a)}else r=Oe("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return r}function yn(e){return we(e.protocol,!0)}function Es(e,t){let r=!1;return t&&!e?r=!0:e&&$e(e)&&e.length&&e.forEach(i=>{r=yn(i)}),r}function _s(e){return typeof e=="number"}function vs(e){return typeof e<"u"&&typeof e!==null}function bs(e){return!(!e||typeof e!="object"||!e.code||!jt(e.code,!1)||!e.message||!we(e.message,!1))}function gs(e){return!(Ae(e)||!we(e.method,!1))}function ws(e){return!(Ae(e)||Ae(e.result)&&Ae(e.error)||!jt(e.id,!1)||!we(e.jsonrpc,!1))}function ys(e){return!(Ae(e)||!we(e.name,!1))}function ms(e,t){return!(!it(t)||!En(e).includes(t))}function ps(e,t,r){return we(r,!1)?_n(e,t).includes(r):!1}function Ss(e,t,r){return we(r,!1)?vn(e,t).includes(r):!1}function Os(e,t,r){let i=null;const a=Object.keys(e),f=Object.keys(t);return ge(a,f)?a.forEach(d=>{var s;if(i)return;const c=e[d].chains,w=Se(t[d].accounts);ge(c,w)?ge(e[d].methods,t[d].methods)?ge(e[d].events,t[d].events)?e[d].extension&&!t[d].extension?i=Oe("NON_CONFORMING_NAMESPACES",`${r} namespaces extension doesn't satisfy requiredNamespaces extension for ${d}`):e[d].extension&&t[d].extension&&((s=e[d].extension)==null||s.forEach(({methods:b,events:S,chains:y})=>{var _;i||(_=t[d].extension)!=null&&_.find(m=>{const O=Se(m.accounts);return ge(y,O)&&ge(S,m.events)&&ge(b,m.methods)})||(i=Oe("NON_CONFORMING_NAMESPACES",`${r} namespaces extension doesn't satisfy requiredNamespaces extension for ${d}`))})):i=Oe("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy requiredNamespaces events for ${d}`):i=Oe("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy requiredNamespaces methods for ${d}`):i=Oe("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy requiredNamespaces chains for ${d}`)}):i=Oe("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces`),i}E.BASE10=pt,E.BASE16=be,E.BASE64=Ze,E.COLON=Io,E.DEFAULT_DEPTH=Ft,E.EMPTY_SPACE=nt,E.ENV_MAP=je,E.ONE_THOUSAND=Mo,E.REACT_NATIVE_PRODUCT=Qr,E.RELAYER_DEFAULT_PROTOCOL=fn,E.SDK_TYPE=Zr,E.SLASH=kr,E.TYPE_0=St,E.TYPE_1=Re,E.UTF8=et,E.appendToQueryString=rn,E.assertType=Bo,E.calcExpiry=Wo,E.capitalize=xo,E.capitalizeWord=cn,E.createDelayedPromise=Yo,E.decodeTypeByte=xe,E.decrypt=za,E.deriveSymKey=Ha,E.deserialize=At,E.encodeTypeByte=Tr,E.encrypt=Wa,E.engineEvent=Jo,E.enumify=Ko,E.formatAccountId=qt,E.formatAccountWithChain=pn,E.formatChainId=Yt,E.formatExpirerTarget=Lt,E.formatIdTarget=Go,E.formatMessageContext=jo,E.formatRelayParams=Dn,E.formatRelayRpcUrl=Po,E.formatTopicTarget=qo,E.formatUA=on,E.formatUri=as,E.generateKeyPair=$a,E.generateRandomBytes32=Va,E.getAccountsChains=Se,E.getAccountsFromNamespaces=On,E.getAddressFromAccount=Gt,E.getAddressesFromAccounts=Sn,E.getAppMetadata=Fo,E.getChainFromAccount=Xt,E.getChainsFromAccounts=Jt,E.getChainsFromNamespaces=Nn,E.getChainsFromRequiredNamespaces=An,E.getEnvironment=Pt,E.getHttpUrl=Lo,E.getInternalError=Oe,E.getJavascriptID=an,E.getJavascriptOS=nn,E.getLastItems=un,E.getNamespacesChains=En,E.getNamespacesEventsForChainId=vn,E.getNamespacesMethodsForChainId=_n,E.getRelayClientMetadata=Ro,E.getRelayProtocolApi=Zo,E.getRelayProtocolName=ko,E.getSdkError=Me,E.getUniqueValues=ut,E.hasOverlap=ge,E.hashKey=Ka,E.hashMessage=xa,E.isBrowser=tn,E.isConformingNamespaces=Os,E.isExpired=zo,E.isNode=Rt,E.isProposalStruct=fs,E.isReactNative=en,E.isSessionCompatible=us,E.isSessionStruct=hs,E.isTypeOneEnvelope=qa,E.isUndefined=Ae,E.isValidAccountId=bn,E.isValidAccounts=Ht,E.isValidActions=Kt,E.isValidArray=$e,E.isValidChainId=it,E.isValidChains=Vt,E.isValidController=ls,E.isValidErrorReason=bs,E.isValidEvent=ys,E.isValidExtension=at,E.isValidId=_s,E.isValidNamespaceAccounts=wn,E.isValidNamespaceActions=xt,E.isValidNamespaceChains=gn,E.isValidNamespaceMethodsOrEvents=$t,E.isValidNamespaces=Ds,E.isValidNamespacesChainId=ms,E.isValidNamespacesEvent=Ss,E.isValidNamespacesRequest=ps,E.isValidNumber=jt,E.isValidObject=Bt,E.isValidParams=vs,E.isValidRelay=yn,E.isValidRelays=Es,E.isValidRequest=gs,E.isValidRequiredNamespaces=ds,E.isValidResponse=ws,E.isValidString=we,E.isValidUrl=cs,E.mapEntries=Ho,E.mapToObj=$o,E.objToMap=Vo,E.parseAccountId=st,E.parseChainId=zt,E.parseContextNames=sn,E.parseExpirerTarget=Xo,E.parseRelayParams=dn,E.parseUri=is,E.serialize=Ir,E.validateDecoding=Ya,E.validateEncoding=Mr,Object.defineProperty(E,"__esModule",{value:!0})});
//# sourceMappingURL=index.umd.js.map
